@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer Localizer

@{
    ViewData["Title"] = Localizer["Home"];
    bool isAuth = User?.Identity?.IsAuthenticated ?? false;
}

<!-- ==========================================
   HERO (Enhanced, Modern, Responsive)
========================================== -->
<section class="home-hero position-relative">
    <!-- Decorative pattern -->
    <img src="~/images/home/tools-pattern.png"
         alt=""
         class="position-absolute top-0 start-0 w-100 h-100 hero-pattern"
         style="object-fit: cover; opacity: .12; pointer-events: none;" />

    <!-- Animated blobs -->
    <div class="home-blob blob-1"></div>
    <div class="home-blob blob-2"></div>
    <div class="home-blob blob-3"></div>

    <div class="container position-relative hero-container">
        <div class="row justify-content-center align-items-center min-vh-70">
            <div class="col-lg-10 col-xl-9 text-center">

                <!-- Badge -->
                <div class="hero-badge-wrapper reveal">
                    <div class="hero-badge">
                        <i class="bi bi-shield-check"></i>
                        <span>@Localizer["HeroBadgeText"]</span>
                    </div>
                </div>

                <!-- Main Title -->
                <h1 class="hero-title fw-bold reveal">
                    @Localizer["HeroMainTitle"]<br class="d-none d-md-block" />
                    <span class="hero-highlight">@Localizer["HeroSubTitle"]</span>
                </h1>

                <!-- Subtitle -->
                <p class="hero-subtitle lead reveal">
                    @Localizer["HeroDescription"]
                </p>

                <!-- Action Buttons -->
                <div class="hero-actions reveal">
                    @if (isAuth)
                    {
                        <a asp-controller="Account" asp-action="HomeRedirect"
                           class="btn btn-hero-primary btn-lg">
                            <i class="bi bi-speedometer2 me-2"></i>@Localizer["GoToDashboard"]
                        </a>
                    }
                    else
                    {
                        <a asp-controller="Account" asp-action="Register"
                           class="btn btn-hero-primary btn-lg">
                            <i class="bi bi-person-plus me-2"></i>@Localizer["CreateAccount"]
                        </a>
                        <a asp-controller="Account" asp-action="Login"
                           class="btn btn-hero-secondary btn-lg">
                            <i class="bi bi-box-arrow-in-right me-2"></i>@Localizer["Login"]
                        </a>
                    }
                    <a asp-controller="WorkerPosts" asp-action="Index"
                       class="btn btn-hero-outline btn-lg">
                        <i class="bi bi-search me-2"></i>@Localizer["BrowseProfessionals"]
                    </a>
                </div>

                <!-- Mobile App Download -->
                <div class="hero-app-download reveal">
                    <a asp-controller="Downloads" asp-action="MobileApp" class="app-download-link">
                        <i class="bi bi-android2"></i>
                        <span>@Localizer["DownloadApp"]</span>
                    </a>
                </div>

                <!-- Stats Cards -->
                <div class="row g-3 justify-content-center hero-stats reveal">
                    <div class="col-6 col-md-4">
                        <div class="hero-stat-card">
                            <div class="stat-icon">
                                <i class="bi bi-shield-check"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-label">@Localizer["StatTrusted"]</div>
                                <div class="stat-desc">@Localizer["StatTrustedDesc"]</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6 col-md-4">
                        <div class="hero-stat-card">
                            <div class="stat-icon">
                                <i class="bi bi-eye"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-label">@Localizer["StatClear"]</div>
                                <div class="stat-desc">@Localizer["StatClearDesc"]</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6 col-md-4">
                        <div class="hero-stat-card">
                            <div class="stat-icon">
                                <i class="bi bi-columns-gap"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-label">@Localizer["StatOrganized"]</div>
                                <div class="stat-desc">@Localizer["StatOrganizedDesc"]</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Features List -->
                <div class="hero-features reveal">
                    <div class="feature-item">
                        <i class="bi bi-check-circle-fill"></i>
                        <span>@Localizer["FeatureProfiles"]</span>
                    </div>
                    <div class="feature-item">
                        <i class="bi bi-check-circle-fill"></i>
                        <span>@Localizer["FeatureRatings"]</span>
                    </div>
                    <div class="feature-item">
                        <i class="bi bi-check-circle-fill"></i>
                        <span>@Localizer["FeatureSearch"]</span>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Bottom Wave -->
    <div class="hero-wave">
        <svg viewBox="0 0 1200 120" preserveAspectRatio="none">
            <path d="M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z" opacity=".25"></path>
            <path d="M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z" opacity=".5"></path>
            <path d="M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z"></path>
        </svg>
    </div>
</section>

<!-- ==========================================
   WHY HOMEIX (REAL VALUE – CUSTOMER & WORKER)
========================================== -->
<section class="py-5 section-why-homeix">
    <div class="container">
        <div class="text-center mb-4 reveal">
            <h2 class="fw-bold mb-2">@Localizer["WhyHomeixTitle"]</h2>
            <p class="text-muted mb-0">
                @Localizer["WhyHomeixSubtitle"]
            </p>
        </div>

        <!-- Split value for both sides -->
        <div class="row g-4 align-items-stretch mb-4">
            <div class="col-lg-6 reveal">
                <div class="p-4 rounded-4 h-100 border card-custom-bg"
                     style="box-shadow: 0 10px 30px rgba(0,0,0,.06);">
                    <div class="d-flex align-items-center gap-2 mb-2">
                        <i class="bi bi-person-heart fs-4 text-primary"></i>
                        <h4 class="fw-bold mb-0">@Localizer["ForCustomers"]</h4>
                    </div>
                    <p class="text-muted mb-0">
                        @Localizer["ForCustomersDesc"]
                    </p>
                </div>
            </div>

            <div class="col-lg-6 reveal">
                <div class="p-4 rounded-4 h-100 border card-custom-bg"
                     style="box-shadow: 0 10px 30px rgba(0,0,0,.06);">
                    <div class="d-flex align-items-center gap-2 mb-2">
                        <i class="bi bi-briefcase fs-4 text-primary"></i>
                        <h4 class="fw-bold mb-0">@Localizer["ForProfessionals"]</h4>
                    </div>
                    <p class="text-muted mb-0">
                        @Localizer["ForProfessionalsDesc"]
                    </p>
                </div>
            </div>
        </div>

        <div class="row g-4 text-center">

            <div class="col-md-4 reveal">
                <div class="card h-100 shadow-sm border-0 rounded-4">
                    <div class="card-body p-4">
                        <div class="icon-bubble mx-auto"><i class="bi bi-person-check"></i></div>
                        <h5 class="fw-bold mt-3">@Localizer["ApprovedProfessionalsTitle"]</h5>
                        <p class="text-muted mb-0">
                            @Localizer["ApprovedProfessionalsDesc"]
                        </p>
                    </div>
                </div>
            </div>

            <div class="col-md-4 reveal">
                <div class="card h-100 shadow-sm border-0 rounded-4">
                    <div class="card-body p-4">
                        <div class="icon-bubble mx-auto"><i class="bi bi-card-checklist"></i></div>
                        <h5 class="fw-bold mt-3">@Localizer["ClearServiceDetailsTitle"]</h5>
                        <p class="text-muted mb-0">
                            @Localizer["ClearServiceDetailsDesc"]
                        </p>
                    </div>
                </div>
            </div>

            <div class="col-md-4 reveal">
                <div class="card h-100 shadow-sm border-0 rounded-4">
                    <div class="card-body p-4">
                        <div class="icon-bubble mx-auto"><i class="bi bi-star"></i></div>
                        <h5 class="fw-bold mt-3">@Localizer["RatingsReviewsTitle"]</h5>
                        <p class="text-muted mb-0">
                            @Localizer["RatingsReviewsDesc"]
                        </p>
                    </div>
                </div>
            </div>

            <div class="col-md-4 reveal">
                <div class="card h-100 shadow-sm border-0 rounded-4">
                    <div class="card-body p-4">
                        <div class="icon-bubble mx-auto"><i class="bi bi-person-lines-fill"></i></div>
                        <h5 class="fw-bold mt-3">@Localizer["PublicProfilesTitle"]</h5>
                        <p class="text-muted mb-0">
                            @Localizer["PublicProfilesDesc"]
                        </p>
                    </div>
                </div>
            </div>

            <div class="col-md-4 reveal">
                <div class="card h-100 shadow-sm border-0 rounded-4">
                    <div class="card-body p-4">
                        <div class="icon-bubble mx-auto"><i class="bi bi-funnel"></i></div>
                        <h5 class="fw-bold mt-3">@Localizer["SearchFilteringTitle"]</h5>
                        <p class="text-muted mb-0">
                            @Localizer["SearchFilteringDesc"]
                        </p>
                    </div>
                </div>
            </div>

            <div class="col-md-4 reveal">
                <div class="card h-100 shadow-sm border-0 rounded-4">
                    <div class="card-body p-4">
                        <div class="icon-bubble mx-auto"><i class="bi bi-heart"></i></div>
                        <h5 class="fw-bold mt-3">@Localizer["FavoritesTitle"]</h5>
                        <p class="text-muted mb-0">
                            @Localizer["FavoritesDesc"]
                        </p>
                    </div>
                </div>
            </div>

            <div class="col-md-4 reveal">
                <div class="card h-100 shadow-sm border-0 rounded-4">
                    <div class="card-body p-4">
                        <div class="icon-bubble mx-auto"><i class="bi bi-images"></i></div>
                        <h5 class="fw-bold mt-3">@Localizer["PhotosTitle"]</h5>
                        <p class="text-muted mb-0">
                            @Localizer["PhotosDesc"]
                        </p>
                    </div>
                </div>
            </div>

            <div class="col-md-4 reveal">
                <div class="card h-100 shadow-sm border-0 rounded-4">
                    <div class="card-body p-4">
                        <div class="icon-bubble mx-auto"><i class="bi bi-megaphone"></i></div>
                        <h5 class="fw-bold mt-3">@Localizer["HighlightedOffersTitle"]</h5>
                        <p class="text-muted mb-0">
                            @Localizer["HighlightedOffersDesc"]
                        </p>
                    </div>
                </div>
            </div>

            <div class="col-md-4 reveal">
                <div class="card h-100 shadow-sm border-0 rounded-4">
                    <div class="card-body p-4">
                        <div class="icon-bubble mx-auto"><i class="bi bi-phone"></i></div>
                        <h5 class="fw-bold mt-3">@Localizer["ResponsiveExperienceTitle"]</h5>
                        <p class="text-muted mb-0">
                            @Localizer["ResponsiveExperienceDesc"]
                        </p>
                    </div>
                </div>
            </div>

        </div>

        <!-- Trust statement aligned with your report -->
        <div class="mt-5 reveal">
            <div class="p-4 rounded-4 border card-custom-bg"
                 style="box-shadow: 0 10px 30px rgba(0,0,0,.06);">
                <div class="d-flex flex-column flex-md-row align-items-start align-items-md-center justify-content-between gap-3">
                    <div>
                        <h5 class="fw-bold mb-1">@Localizer["TrustTransparencyTitle"]</h5>
                        <p class="text-muted mb-0">
                            @Localizer["TrustTransparencyDesc"]
                        </p>
                    </div>

                    <div class="d-flex gap-2 flex-wrap">
                        <a asp-controller="WorkerPosts" asp-action="Index" class="btn btn-outline-primary">
                            @Localizer["ExploreServices"]
                        </a>
                        <a asp-controller="CustomerPosts" asp-action="Create" class="btn btn-primary">
                            @Localizer["PostRequest"]
                        </a>
                    </div>
                </div>
            </div>
        </div>

    </div>
</section>

<!-- ==========================================
   POPULAR SERVICES
========================================== -->
<section class="py-5 section-popular-services">
    <div class="container">
        <div class="text-center mb-4 reveal">
            <h2 class="fw-bold mb-1">@Localizer["PopularServicesTitle"]</h2>
            <p class="text-muted mb-0">@Localizer["PopularServicesSubtitle"]</p>
        </div>

        @functions {
            string ServiceImg(string file) => Url.Content("~/images/home/services/" + file);
        }

        @{
            var services = new[]
            {
        new { Name = Localizer["ServicePlumbing"].Value, Icon = "bi-wrench-adjustable", Img = "plumbing.jpg" },
        new { Name = Localizer["ServiceElectrical"].Value, Icon = "bi-lightning-charge", Img = "electrical.jpg" },
        new { Name = Localizer["ServiceACCooling"].Value, Icon = "bi-snow", Img = "ac.jpg" },
        new { Name = Localizer["ServicePainting"].Value, Icon = "bi-brush", Img = "painting.jpg" },
        new { Name = Localizer["ServiceCleaning"].Value, Icon = "bi-bucket", Img = "cleaning.jpg" },
        new { Name = Localizer["ServiceRepairs"].Value, Icon = "bi-tools", Img = "repairs.jpg" },
        new { Name = Localizer["ServiceCarpentry"].Value, Icon = "bi-door-open", Img = "carpentry.jpg" },
        new { Name = Localizer["ServiceMaintenance"].Value, Icon = "bi-house-gear", Img = "maintenance.jpg" },
        };
        }

        <div class="popular-marquee reveal">
            <div class="popular-track">
                @for (int loop = 0; loop < 2; loop++)
                {
                    foreach (var s in services)
                    {
                        <div class="service-flip popular-item" role="button" tabindex="0">
                            <div class="flip-inner">
                                <div class="flip-face flip-front card shadow-sm border-0 rounded-4">
                                    <div class="card-body text-center py-4">
                                        <i class="bi @s.Icon fs-1 text-primary"></i>
                                        <div class="fw-bold mt-2">@s.Name</div>
                                        <div class="text-muted small">@Localizer["TapToPreview"]</div>
                                    </div>
                                </div>
                                <div class="flip-face flip-back card shadow-sm border-0 rounded-4 overflow-hidden">
                                    <img src="@ServiceImg(s.Img)" alt="@s.Name" />
                                </div>
                            </div>
                        </div>
                    }
                }
            </div>
        </div>
    </div>
</section>

<!-- ==========================================
   CUSTOMER & PROFESSIONAL ROLES (INFORMATION)
========================================== -->
<section class="py-5 section-role-info">
    <div class="container">

        <!-- Section Header -->
        <div class="text-center mb-5 reveal">
            <h2 class="fw-bold mb-2">
                @Localizer["RolesTitle"]
            </h2>
            <p class="text-muted mb-0">
                @Localizer["RolesSubtitle"]
            </p>
        </div>

        <div class="row g-4 justify-content-center">

            <!-- CUSTOMER -->
            <div class="col-lg-5 reveal">
                <div class="h-100 border rounded-4 p-4 card-custom-bg">
                    <div class="d-flex align-items-center gap-3 mb-3">
                        <div class="icon-bubble">
                            <i class="bi bi-house-check"></i>
                        </div>
                        <h4 class="fw-bold mb-0">
                            @Localizer["CustomerTitle"]
                        </h4>
                    </div>

                    <p class="text-muted mb-3">
                        @Localizer["CustomerDesc"]
                    </p>

                    <ul class="list-unstyled text-muted small mb-0">
                        <li class="mb-2">
                            <i class="bi bi-check-circle me-2 text-primary"></i>
                            @Localizer["CustomerPoint1"]
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle me-2 text-primary"></i>
                            @Localizer["CustomerPoint2"]
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle me-2 text-primary"></i>
                            @Localizer["CustomerPoint3"]
                        </li>
                        <li>
                            <i class="bi bi-check-circle me-2 text-primary"></i>
                            @Localizer["CustomerPoint4"]
                        </li>
                    </ul>
                </div>
            </div>

            <!-- PROFESSIONAL -->
            <div class="col-lg-5 reveal">
                <div class="h-100 border rounded-4 p-4 card-custom-bg">
                    <div class="d-flex align-items-center gap-3 mb-3">
                        <div class="icon-bubble">
                            <i class="bi bi-person-badge"></i>
                        </div>
                        <h4 class="fw-bold mb-0">
                            @Localizer["ProfessionalTitle"]
                        </h4>
                    </div>

                    <p class="text-muted mb-3">
                        @Localizer["ProfessionalDesc"]
                    </p>

                    <ul class="list-unstyled text-muted small mb-0">
                        <li class="mb-2">
                            <i class="bi bi-check-circle me-2 text-primary"></i>
                            @Localizer["ProfessionalPoint1"]
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle me-2 text-primary"></i>
                            @Localizer["ProfessionalPoint2"]
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle me-2 text-primary"></i>
                            @Localizer["ProfessionalPoint3"]
                        </li>
                        <li>
                            <i class="bi bi-check-circle me-2 text-primary"></i>
                            @Localizer["ProfessionalPoint4"]
                        </li>
                    </ul>
                </div>
            </div>

        </div>
    </div>
</section>

<!-- ==========================================
   FAQ
========================================== -->
<section class="py-5 section-faq">
    <div class="container">
        <div class="text-center mb-4 reveal">
            <h2 class="fw-bold mb-2">@Localizer["FAQTitle"]</h2>
            <p class="text-muted mb-0">@Localizer["FAQSubtitle"]</p>
        </div>

        <div class="accordion accordion-flush border rounded-4 overflow-hidden reveal" id="homeixFaq">
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button" data-bs-toggle="collapse" data-bs-target="#a1">
                        @Localizer["FAQ1Question"]
                    </button>
                </h2>
                <div id="a1" class="accordion-collapse collapse show">
                    <div class="accordion-body text-muted">
                        @Localizer["FAQ1Answer"]
                    </div>
                </div>
            </div>

            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#a2">
                        @Localizer["FAQ2Question"]
                    </button>
                </h2>
                <div id="a2" class="accordion-collapse collapse">
                    <div class="accordion-body text-muted">
                        @Localizer["FAQ2Answer"]
                    </div>
                </div>
            </div>

            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#a3">
                        @Localizer["FAQ3Question"]
                    </button>
                </h2>
                <div id="a3" class="accordion-collapse collapse">
                    <div class="accordion-body text-muted">
                        @Localizer["FAQ3Answer"]
                    </div>
                </div>
            </div>

            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#a4">
                        @Localizer["FAQ4Question"]
                    </button>
                </h2>
                <div id="a4" class="accordion-collapse collapse">
                    <div class="accordion-body text-muted">
                        @Localizer["FAQ4Answer"]
                    </div>
                </div>
            </div>

        </div>
    </div>
</section>

<!-- ==========================================
   CTA
========================================== -->
<section class="section-cta text-white py-5">
    <div class="container text-center reveal">
        <h2 class="fw-bold mb-2 text-white">@Localizer["CTATitle"]</h2>
        <p class="text-white-50 mb-4">
            @Localizer["CTASubtitle"]
        </p>

        <div class="d-flex justify-content-center flex-wrap gap-2">
            @if (isAuth)
            {
                <a asp-controller="Account" asp-action="HomeRedirect" class="btn btn-accent btn-lg fw-bold">
                    @Localizer["OpenMyHomeix"]
                </a>
            }
            else
            {
                <a asp-controller="Account" asp-action="Register" class="btn btn-accent btn-lg fw-bold">
                    @Localizer["CreateAccount"]
                </a>
                <a asp-controller="Account" asp-action="Login" class="btn btn-outline-light btn-lg">
                    @Localizer["Login"]
                </a>
            }

            <a asp-controller="WorkerApprovals" asp-action="Index" class="btn btn-outline-light btn-lg">
                @Localizer["BecomeProfessional"]
            </a>
        </div>

        <div class="d-flex justify-content-center mt-3">
            <a asp-controller="Downloads"
               asp-action="MobileApp"
               class="btn btn-outline-light btn-sm d-flex align-items-center gap-2 px-3 py-2">
                <i class="bi bi-android2 fs-5"></i>
                <span>@Localizer["DownloadApp"]</span>
            </a>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const els = document.querySelectorAll(".reveal");
            const obs = new IntersectionObserver((entries) => {
                entries.forEach(e => {
                    if (e.isIntersecting) e.target.classList.add("is-visible");
                });
            }, { threshold: 0.12 });

            els.forEach(el => obs.observe(el));

            document.querySelectorAll(".service-flip").forEach(card => {
                card.addEventListener("click", () => card.classList.toggle("is-flipped"));
                card.addEventListener("keypress", (ev) => {
                    if (ev.key === "Enter" || ev.key === " ") {
                        ev.preventDefault();
                        card.classList.toggle("is-flipped");
                    }
                });
            });
        });
    </script>
}