@{
    ViewData["Title"] = "Home";
    bool isAuth = User?.Identity?.IsAuthenticated ?? false;
}

<!-- ==========================================
   HERO (Centered, no right box, animated background)
========================================== -->
<section class="home-hero text-white py-5 position-relative">
    <!-- Decorative pattern -->
    <img src="~/images/home/tools-pattern.png"
         alt=""
         class="position-absolute top-0 start-0 w-100 h-100 opacity-25"
         style="object-fit: cover; pointer-events: none;" />

    <!-- Animated blobs -->
    <div class="home-blob blob-1"></div>
    <div class="home-blob blob-2"></div>

    <div class="container position-relative">
        <div class="row justify-content-center">
            <div class="col-lg-10 col-xl-9 text-center">
                <div class="hero-badge mb-3 justify-content-center">
                    <i class="bi bi-shield-check"></i>
                    <span>Verified professionals • Secure payments • In-app chat</span>
                </div>

                <h1 class="display-3 fw-bold mb-3">
                    Fix your home.<br class="d-none d-md-block" />
                    Faster. Safer. Smarter.
                </h1>

                <p class="lead hero-lead mb-4">
                    Post a job, connect with trusted professionals, chat instantly, and track progress — all in one place.
                </p>

                <div class="d-flex flex-wrap gap-2 justify-content-center hero-actions">
                    @if (isAuth)
                    {
                        <a asp-controller="Account" asp-action="HomeRedirect" class="btn btn-accent btn-lg fw-bold">
                            Go to Dashboard
                        </a>
                    }
                    else
                    {
                        <a asp-controller="Account" asp-action="Register" class="btn btn-accent btn-lg fw-bold">
                            Create Account
                        </a>
                        <a asp-controller="Account" asp-action="Login" class="btn btn-outline-light btn-lg">
                            Login
                        </a>
                    }

                    <a asp-controller="WorkerPosts" asp-action="Index" class="btn btn-outline-light btn-lg">
                        Browse Professionals
                    </a>
                </div>

                <div class="row g-3 justify-content-center mt-4">
                    <div class="col-12 col-md-4">
                        <div class="card stat-card h-100">
                            <div class="card-body text-center">
                                <div class="stat-value">Fast</div>
                                <div class="small text-white-50">Quick matching</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-4">
                        <div class="card stat-card h-100">
                            <div class="card-body text-center">
                                <div class="stat-value">Simple</div>
                                <div class="small text-white-50">One dashboard</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-4">
                        <div class="card stat-card h-100">
                            <div class="card-body text-center">
                                <div class="stat-value">Secure</div>
                                <div class="small text-white-50">Safe workflow</div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section>

<!-- ==========================================
   WHY HOMEIX (with images, professional)
========================================== -->
<section class="py-5">
    <div class="container">
        <div class="text-center mb-4 reveal">
            <h2 class="fw-bold mb-2">Why Homeix?</h2>
            <p class="text-muted mb-0">Built for real home-service workflows.</p>
        </div>

        <div class="row g-4">
            <!-- 1 -->
            <div class="col-md-4 reveal">
                <div class="card h-100 shadow-sm border-0 rounded-4 overflow-hidden">
                    <div class="ratio ratio-16x9">
                        <img src="~/images/home/why/secure.jpg"
                             class="w-100 h-100"
                             style="object-fit: cover;"
                             alt="Secure and reliable" />
                    </div>

                    <div class="card-body p-4 text-center">
                        <div class="icon-bubble mx-auto mb-2">
                            <i class="bi bi-shield-lock"></i>
                        </div>
                        <h5 class="fw-bold mb-2">Secure & reliable</h5>
                        <p class="text-muted mb-0">
                            Your account, activity, and payments follow a safe flow.
                        </p>
                    </div>
                </div>
            </div>

            <!-- 2 -->
            <div class="col-md-4 reveal">
                <div class="card h-100 shadow-sm border-0 rounded-4 overflow-hidden">
                    <div class="ratio ratio-16x9">
                        <img src="~/images/home/why/chat.jpg"
                             class="w-100 h-100"
                             style="object-fit: cover;"
                             alt="Built-in messaging" />
                    </div>

                    <div class="card-body p-4 text-center">
                        <div class="icon-bubble mx-auto mb-2">
                            <i class="bi bi-chat-square-dots"></i>
                        </div>
                        <h5 class="fw-bold mb-2">Built-in messaging</h5>
                        <p class="text-muted mb-0">
                            Confirm details, share updates, keep everything documented.
                        </p>
                    </div>
                </div>
            </div>

            <!-- 3 -->
            <div class="col-md-4 reveal">
                <div class="card h-100 shadow-sm border-0 rounded-4 overflow-hidden">
                    <div class="ratio ratio-16x9">
                        <img src="~/images/home/why/history.jpg"
                             class="w-100 h-100"
                             style="object-fit: cover;"
                             alt="Track job history" />
                    </div>

                    <div class="card-body p-4 text-center">
                        <div class="icon-bubble mx-auto mb-2">
                            <i class="bi bi-clipboard-data"></i>
                        </div>
                        <h5 class="fw-bold mb-2">Track job history</h5>
                        <p class="text-muted mb-0">
                            Stay organized with progress tracking and completed records.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ==========================================
   POPULAR SERVICES (Flip Cards, auto-moving row, no scrollbar)
========================================== -->
<section class="py-5 bg-body-tertiary">
    <div class="container">
        <div class="text-center mb-4 reveal">
            <h2 class="fw-bold mb-1">Popular services</h2>
            <p class="text-muted mb-0">Hover (or tap) to preview — the row moves automatically.</p>
        </div>

        @functions {
            string ServiceImg(string file) => Url.Content("~/images/home/services/" + file);
        }

        @{
            var services = new[]
            {
        new { Name = "Plumbing",    Icon = "bi-wrench-adjustable", Img = "plumbing.jpg" },
        new { Name = "Electrical",  Icon = "bi-lightning-charge",  Img = "electrical.jpg" },
        new { Name = "AC / Cooling",Icon = "bi-snow",              Img = "ac.jpg" },
        new { Name = "Painting",    Icon = "bi-brush",             Img = "painting.jpg" },
        new { Name = "Cleaning",    Icon = "bi-bucket",            Img = "cleaning.jpg" },
        new { Name = "Repairs",     Icon = "bi-tools",             Img = "repairs.jpg" },
        new { Name = "Carpentry",   Icon = "bi-door-open",         Img = "carpentry.jpg" },
        new { Name = "Maintenance", Icon = "bi-house-gear",        Img = "maintenance.jpg" },
        };
        }

        <div class="popular-marquee reveal">
            <div class="popular-track">

                @* Render twice for seamless loop *@
                @for (int loop = 0; loop < 2; loop++)
                {
                    foreach (var s in services)
                    {
                        <div class="service-flip popular-item" role="button" tabindex="0" aria-label="@s.Name">
                            <div class="flip-inner">
                                <div class="flip-face flip-front card shadow-sm border-0 rounded-4">
                                    <div class="card-body text-center py-4">
                                        <i class="bi @s.Icon fs-1 text-primary"></i>
                                        <div class="fw-bold mt-2">@s.Name</div>
                                        <div class="text-muted small">Tap to flip</div>
                                    </div>
                                </div>

                                <div class="flip-face flip-back card shadow-sm border-0 rounded-4 overflow-hidden">
                                    <img src="@ServiceImg(s.Img)" alt="@s.Name" />
                                    <div class="flip-back-overlay">
                                        <div class="fw-bold">@s.Name</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                }

            </div>
        </div>
    </div>
</section>

<!-- ==========================================
   CHOOSE YOUR PATH (unchanged)
========================================== -->
<section class="py-5 position-relative overflow-hidden choose-path-section">
    <img src="~/images/home/choose-path-bg.png"
         alt=""
         class="position-absolute top-0 start-0 w-100 h-100"
         style="object-fit: cover; opacity: 1; pointer-events: none; z-index: 0;" />

    <div class="container position-relative" style="z-index: 1;">
        <div class="text-center mb-4 text-white reveal">
            <h2 class="fw-bold mb-2">Choose your path</h2>
            <p class="mb-0 text-white-50">Customer or Professional — both managed from one dashboard.</p>
        </div>

        <div class="row g-4 justify-content-center">
            <div class="col-lg-5 reveal">
                <div class="card border border-light border-opacity-25 bg-white bg-opacity-10 text-white shadow rounded-4">
                    <div class="card-body p-4 text-center">
                        <div class="display-6 mb-2"><i class="bi bi-gear-fill"></i></div>
                        <h5 class="fw-bold mb-2">Customer</h5>
                        <p class="text-white-50 small mb-4">
                            Create a job post, compare, chat, and track everything.
                        </p>
                        <div class="d-grid gap-2">
                            <a asp-controller="CustomerPosts" asp-action="Create" class="btn btn-accent fw-bold">
                                Create
                            </a>
                            <a asp-controller="WorkerPosts" asp-action="Index" class="btn btn-outline-light">
                                Search
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-5 reveal">
                <div class="card border border-light border-opacity-25 bg-white bg-opacity-10 text-white shadow rounded-4">
                    <div class="card-body p-4 text-center">
                        <div class="display-6 mb-2"><i class="bi bi-person-badge-fill"></i></div>
                        <h5 class="fw-bold mb-2">Professional</h5>
                        <p class="text-white-50 small mb-4">
                            Apply, publish your services, and manage jobs professionally.
                        </p>
                        <div class="d-grid gap-2">
                            <a asp-controller="WorkerApprovals" asp-action="Index" class="btn btn-accent fw-bold">
                                Apply
                            </a>
                            <a asp-controller="WorkerPosts" asp-action="Index" class="btn btn-outline-light">
                                Browse posts
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ==========================================
   FAQ (unchanged)
========================================== -->
<section class="py-5">
    <div class="container">
        <div class="text-center mb-4 reveal">
            <h2 class="fw-bold mb-2">Frequently asked questions</h2>
            <p class="text-muted mb-0">Quick answers to common questions.</p>
        </div>

        <div class="accordion accordion-flush border rounded-4 overflow-hidden reveal" id="homeixFaq">
            <div class="accordion-item">
                <h2 class="accordion-header" id="q1">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#a1">
                        How do I post a job?
                    </button>
                </h2>
                <div id="a1" class="accordion-collapse collapse show" data-bs-parent="#homeixFaq">
                    <div class="accordion-body text-muted">
                        Create an account, then create a post describing what you need, when you need it, and any details.
                    </div>
                </div>
            </div>

            <div class="accordion-item">
                <h2 class="accordion-header" id="q2">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a2">
                        How do I become a professional on Homeix?
                    </button>
                </h2>
                <div id="a2" class="accordion-collapse collapse" data-bs-parent="#homeixFaq">
                    <div class="accordion-body text-muted">
                        Submit your application from “Become a Professional”, then once approved you can create worker posts and get customers.
                    </div>
                </div>
            </div>

            <div class="accordion-item">
                <h2 class="accordion-header" id="q3">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a3">
                        Can I chat before confirming?
                    </button>
                </h2>
                <div id="a3" class="accordion-collapse collapse" data-bs-parent="#homeixFaq">
                    <div class="accordion-body text-muted">
                        Yes—use Messages to discuss price, timing, and scope before starting.
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ==========================================
   CTA (unchanged)
========================================== -->
<section class="bg-dark text-white py-5">
    <div class="container text-center reveal">
        <h2 class="fw-bold mb-2">Ready to start?</h2>
        <p class="text-white-50 mb-4">
            Join Homeix as a customer or a professional and manage everything from one modern dashboard.
        </p>

        <div class="d-flex justify-content-center flex-wrap gap-2">
            @if (isAuth)
            {
                <a asp-controller="Account" asp-action="HomeRedirect" class="btn btn-accent btn-lg fw-bold">
                    Open My Homeix
                </a>
            }
            else
            {
                <a asp-controller="Account" asp-action="Register" class="btn btn-accent btn-lg fw-bold">
                    Create Account
                </a>
                <a asp-controller="Account" asp-action="Login" class="btn btn-outline-light btn-lg">
                    Login
                </a>
            }

           
        </div>
    </div>
</section>

@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", function () {

            // Reveal animation
            const els = document.querySelectorAll(".reveal");
            const obs = new IntersectionObserver((entries) => {
                entries.forEach(e => {
                    if (e.isIntersecting) e.target.classList.add("is-visible");
                });
            }, { threshold: 0.12 });

            els.forEach(el => obs.observe(el));

            // Flip cards (tap/click support)
            document.querySelectorAll(".service-flip").forEach(card => {
                card.addEventListener("click", () => card.classList.toggle("is-flipped"));
                card.addEventListener("keypress", (ev) => {
                    if (ev.key === "Enter" || ev.key === " ") {
                        ev.preventDefault();
                        card.classList.toggle("is-flipped");
                    }
                });
            });
        });
    </script>
}